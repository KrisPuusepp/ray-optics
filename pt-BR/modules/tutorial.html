<!--
  Copyright 2024 The Ray Optics Simulation authors and contributors

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <!--
    Copyright 2024 The Ray Optics Simulation authors and contributors
  
    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at
  
        http://www.apache.org/licenses/LICENSE-2.0
  
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
  -->
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tutorial para fazer Módulos da Óptica de Raios - Simulação de Óptica de Raios</title>
  <meta property="og:title" content="Tutorial para fazer Módulos da Óptica de Raios - Simulação de Óptica de Raios">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://phydemo.app/ray-optics/pt-BR/modules/tutorial">
  <meta property="og:image" content="https://phydemo.app/ray-optics/img/image.png">
  <meta property="og:description" content="Simulação de Óptica de Raios">
  <meta property="og:locale" content="pt-BR">
  <link rel="canonical" href="https://phydemo.app/ray-optics/pt-BR/modules/tutorial">
  <link rel="alternate" hreflang="en" href="https://phydemo.app/ray-optics/modules/tutorial">
  <link rel="alternate" hreflang="pl" href="https://phydemo.app/ray-optics/pl/modules/tutorial">
  <link rel="alternate" hreflang="pt-BR" href="https://phydemo.app/ray-optics/pt-BR/modules/tutorial">
  <link rel="alternate" hreflang="zh-CN" href="https://phydemo.app/ray-optics/cn/modules/tutorial">
  <link rel="alternate" hreflang="zh-TW" href="https://phydemo.app/ray-optics/tw/modules/tutorial">
  <link rel="stylesheet" href="../../thirdparty/bootstrap/bootstrap.min.css">
  <link rel="icon" href="../../img/icon.png" type="image/png">
  <style>
    .brand {
      font-size: 12pt;
      color: #888;
      margin-top: 0px;
      margin-bottom: 0px;
      margin-left: 5px;
      margin-right: 5px;
      padding: 0px;
      height: 40px;
      line-height: 40px;
      position: relative;
      text-align: center;
      text-decoration: none;
    }
  
    .brand:hover {
      text-decoration: none;
    }
  
    .github-button-container {
      color: #888;
      margin-top: 7px;
      margin-bottom: 0px;
      margin-left: 0px;
      margin-right: 0px;
      padding: 0px;
      height: 40px;
      width: 92px;
      line-height: 40px;
      position: relative;
      text-align: center;
      float: right;
    }
  
    .github-button-container a {
      color: transparent;
    }
  
    .navul {
      font-size: 11pt;
    }
  
    .navul a {
      color: #555;
      float: left;
      margin-top: 0px;
      margin-bottom: 0px;
      margin-left: 5px;
      margin-right: 5px;
      padding: 2px;
      height: 40px;
      line-height: 40px;
      position: relative;
      text-align: center;
      text-decoration: none;
    }
  
    .clearfix {
      clear: both;
    }
  
    .navul a:hover {
      border-bottom: 3px solid #CCC;
      text-decoration: none;
    }
  
    .navul a.active {
      color: #000;
      border-bottom: 3px solid gray;
    }
  
    body {
      padding-top: 72px;
    }
  </style>
  <script defer src="../../thirdparty/jquery.min.js"></script>
  <script defer src="../../thirdparty/bootstrap/bootstrap.min.js"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>  <style>
    iframe {
      border: none;
      width: 100%;
      height: 400px;
    }
  </style>
</head>

<body>
  <!--
    Copyright 2024 The Ray Optics Simulation authors and contributors
  
    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at
  
        http://www.apache.org/licenses/LICENSE-2.0
  
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
  -->
  
  <div class="navbar navbar-fixed-top container" style="background-color:white;max-height:90px;overflow:hidden">
  
    <a href="../../pt-BR/" class="navbar-left brand">
      <img src="../../img/icon.png" alt="" style="width:18pt; height:18pt"> Simulação de Óptica de Raios
    </a>
    <div class="navbar-right">
  
      <span class="navul">
        <a href="../../pt-BR/" class="">Início</a>
        <a href="../../gallery/" class="">Galeria</a>
        <a href="../../pt-BR/about" class="">Sobre</a>
      </span>
      <span class="github-button-container">
        <a class="github-button" href="https://github.com/ricktu288/ray-optics" data-show-count="true"
          aria-label="Star ricktu288/ray-optics on GitHub">Star</a>
      </span>
    </div>
  
  </div>  <div class="container">
    <h1 id="tutorial">Tutorial para fazer Módulos da Óptica de Raios</h1>
    
    <p>Este tutorial vai te guiar pelo processi básico de criação de um módulo personalizado, que pode ser completamente feito dentro do app web, sem necessidade de qualquer ambiente de desenvolvimento externo.</p>
    <p>O recurso &quot;Módulo&quot; da Simulação de Óptica de Raios permite a criação de combinações modulares de objetos com parâmetros personalizados, pontos de controle personalizados, e malhas de objetos. Esse recurso extende a capacidade deste simulador ao combinar, especializar, ou reparametrizar objetos criados por ferramentas existentes para criar novas ferramentas. Por exemplo, o módulo <code>CircleSource</code> (ver Ferramentas -&gt; Outros -&gt; Importar módulo) combina uma série de fontes pontuais criadas pela ferramenta existente &quot;Fonte pontual (&lt;360°)&quot; ao redor de um círculo, para fazer uma ferramenta &quot;fonte circular&quot; que não existia no simulador. O módulo <code>FresnelLens</code> especializa a ferramenta &quot;Glass-&gt;Custom equation&quot;, para que a equação represente uma curva específica da lente Fresnel parametrizada pelo número de fatias, assim fazendo uma ferramenta especializada &quot;Lente Fresnel&quot;, que tambem não existia anteriormente. Além de fazer novas ferramentas, esse recurso também pode fazer algumas demonstrações de óptica mais interativas. Por exemplo, ao arrastar o terceiro ponto de controle do módulo <code>BeamExpander</code>, pode-se ver diretamente como a posição do ponto focal em comum das duas lentes afeta a largura do raio, sem necessitar ajustar os comprimentos focais das duas lentes individualmente.</p>
    <p>Note que nem todos pontos de controle personalizados requerem um módulo. Alguns casos simples podem ser feitos com o recurso &quot;ponto de mauseio&quot; (ver a seção &quot;Agrupar, rotacionar e ajustar escala de objetos&quot; no popup de ajuda no canto inferior direito do simulador). Já que fazer um módulo é muito mais complicado que criar um ponto de manuseio, deve-se primeiro checar se o seu caso oise ser feito pelo recurso &quot;ponto de manuseio&quot; antes de considerar fazer um módulo. Veja <a href="../../gallery/black-cat-becomes-white">aqui</a> para um exemplo não trivial de um ponto de controle personalizado (mover dois sacos plásticos pra fora da água) sem utilizar um módulo.</p>

    <h2 id="the-built-in-json-editor">O editor JSON incluso</h2>
    <p>Este app atualmente não possui uma interface visual para criação de módulos, então é preciso diretamente editar o JSON da cena.</p>
    <p>Você pode habilitar o editor JSON incluso ao clicar no menu &quot;configurações&quot; no canto superior direito do app, e então marcar &quot;Exibir editor JSON&quot;. O editor de código deve aparecer no lado esquerdo do app, com o código JSON da cena atual. Certifique-se que a sua tela é grande o suficiente, já que este recurso não funciona bem em dispositivos móveis.</p>
    <p>Conforme você edita a cena utilizando o editor visual de cena, o código no editor JSON vai atualizar automaticamente, com a parte modificada destacada. Do mesmo modo, editar o código no editor JSON diretamente vai atualizar a cena automaticamente. Se você não for familiar com JSON ou qualquer tipo de formato de dados à base de texto, pode ser útil brincar com isso por um tempo.</p>
    <p>Em particular, quando se adiciona um objeto à cena, ele é adicionado à lista <code>objs</code>. E se você modificar algumas de suas propriedades para um valor não padrão, elas aparecem como pares chave-valor nesse objeto.</p>
    <b><p>IMPORTANTE: Nessa página de tutorial, se você não ver o editor de código JSON nos iframes abaixo, por favor habilite-o e recarregue esta página, pois vocÊ precisará de ver o código para entender como funciona.</p></b>

    <h2 id="basics-of-a-module">O básico de um módulo</h2>
    <p>Vamos ver o nosso primeiro exemplo de módulo.</p>
    <iframe loading="lazy" src="../../simulator/?pt-BR#module-example-basics"></iframe>
    <p>Você deve ver quatro linhas de texto. Olhando no editor JSON, você verá que as primeira duas estão diretamente na lista <code>objs</code> de nível superior como normal, mas as últimas duas estão em <code>modules.ExampleModule.objs</code> ao invés disso.</p>
    <p>O <code>module</code> é um dicionário onde a chave é o nome do módulo (neste caso <code>ExampleModule</code>), e o valor é a definição do módulo. Em específico, a lista <code>modules.ExampleModule.objs</code> descreve (o padrão de) objetos dentro desse módulo, que é diferente do <code>objs</code> do nível superior que descreve objetos na cena.</p>
    <p>To put the objects within the module to the scene, we need a &quot;module object&quot; in the top-level <code>objs</code> array, which is <code>objs[2]</code> in this example, whose type is <code>ModuleObj</code> and whose <code>module</code> property is the name of the module.</p>
    <p>The module definition in the <code>modules</code> dictionary is not editable by the visual scene editor. So when you click any of the last two texts in this example, you are just selecting the module object, and not the objects in the module. Since the coordinates of the texts in the module definition in this example are absolute coordinates, the last two texts are not draggable. We will learn how to make them draggable by using control points later.</p>
    <p>If you select a module object, there is a &quot;Demodulize&quot; button on the object bar. Clicking it will &quot;expand&quot; the module object into its constituent, and <code>objs</code> will now contain all the four texts. This operation is not reversible (but of course you can click &quot;undo&quot;).</p>
    <p>The suggested way of creating a module currently is to first create an empty module using the JSON editor, create some objects using the visual scene editor, and then cut and paste the objects from <code>objs</code> to <code>modules.ModuleName.objs</code> using the JSON editor.</p>

    <h2 id="adding-parameters">Adding parameters</h2>
    <p>The objects within the module can be defined by a set of parameters. Let’s look at a simple example</p>
    <iframe loading="lazy" src="../../simulator/?pt-BR#module-example-parameters"></iframe>
    <p>Here <code>modules.ModuleName.params</code> is an array of strings <code>&quot;name=start:step:end:default&quot;</code> defining the name of the variables and the range of the sliders. The sliders appear on the object bar when the module object is selected.</p>
    <p>Within the <code>modules.ExampleModule.objs</code> array, any values can be expressed using those parameters. Within a string (such as the <code>text</code> property of a <code>TextLabel</code>), the equations of the variables are enclosed by a pair of backticks. For number parameters (such as the <code>fontSize</code> property of a <code>TextLabel</code>), you need to make it a string so that you can use the backtick format in it, so each equation is sandwiched by a pair of backticks and a pair of quotes. The equation are evaluated with math.js (<a href="https://mathjs.org/docs/reference/functions/evaluate.html">syntax</a>). See there for the available syntax and functions you can use in the equations.</p>
    <p>The actual values of the parameters are stored in the <code>params</code> property of the module object, which, unlike the module definition, can be directly edited by the scene editor using the slider.</p>

    <h2 id="adding-control-points">Adding control points</h2>
    <p>To make the module object draggable, we need to parametrize the objects within the module using a set of control points. Let’s look at the example</p>
    <iframe loading="lazy" src="../../simulator/?pt-BR#module-example-control-points"></iframe>
    <p>Here <code>modules.ModuleName.numPoints</code> defines the number of control points. The coordinates of the control points are (<code>x_1</code>, <code>y_1</code>), (<code>x_2</code>, <code>y_2</code>), etc, and are used in the same ways as the parameters within <code>modules.ExampleModule.objs</code> as described by the previous section. Note that the index starts from 1.</p>
    <p>The actual values of the coordinates of the control points are stored in the <code>points</code> property of the module object, which, unlike the hard-coded coordinates in Example 1, can be edited by the visual scene editor by dragging the control points, each shown as two concentric gray circles in the scene. If you drag elsewhere in the module object (such as dragging the text labels), all the control points will move together.</p>
    <p>Since our module object can now move, it is now quite easy to create multiple instances as in usual tools. The name of the module is shown in the Tools -&gt; Other menu, and you can select that and then click two points in the blank space in sequence for the two control points to create another instance of the module.  You can also use the “duplicate” button on the object bar.</p>

    <h2 id="arrays-and-conditionals">Arrays and conditionals</h2>
    <p>More complicated module can be built using arrays and conditionals. Let’s look at the example</p>
    <iframe loading="lazy" src="../../simulator/?pt-BR#module-example-arrays-and-conditionals"></iframe>
    <p>Within <code>modules.ExampleModule.objs</code>, any objects in an array can have two special keys: <code>&quot;for&quot;</code> and <code>&quot;if&quot;</code>. The value of the <code>&quot;for&quot;</code> key is either a string of the format <code>&quot;name=start:step:end&quot;</code> defining a loop variable, or an array of several strings of this format describing a multidimensional loop. Such an object in the array is duplicated several times according to the loop variables. The value of the <code>&quot;if&quot;</code> key is a string representing a math.js expression that evaluates to a boolean, and such an object is included in the array if and only if the boolean is true.</p>
    <p>To prevent accidental infinite loop, the total number of iteration of each <code>&quot;for&quot;</code> loop is limited by the <code>maxLoopLength</code> property of the module definition, whose default value is 1000. You can set this property to a larger value if needed.</p>

    <h2 id="objects-with-built-in-custom-equations">Objects with built-in custom equations</h2>
    <p>For objects that already have custom equation input (such as Mirror -&gt; Custom Equation), the equation property in the JSON is a string representing a LaTeX equation, rather than a math.js expression. To include custom parameters in the equation, you must use the same template syntax as if the LaTeX equation were a regular text. So the part enclosed by the backticks is in math.js expression, while the part outside is in LaTeX. The module parameters can only be accessed in the math.js part, and the independent variables of the custom equation (e.g. \(x\)) can only be accessed in the LaTeX part. Here is an example of generating a mirror with equation \(y=\cos(2\pi x+\phi)\), where \(\phi\) is a module parameter</p>
    <iframe loading="lazy" src="../../simulator/?pt-BR#module-example-custom-equation"></iframe>
    <p>In the future, there may be a way to unified the equation input.</p>

    <h2 id="objects-with-built-in-shape-parametrization">Objects with built-in shape parametrization</h2>
    <p>For objects that already support different ways to define its shape (currently only Glass -&gt; Spherical lens). There are special JSON syntax for such objects that can be used within the module definition, even if they are always defined by shape in the top level <code>objs</code> array. Here is an example</p>
    <iframe loading="lazy" src="../../simulator/?pt-BR#module-example-shape-parametrization"></iframe>

    <!--
      Copyright 2024 The Ray Optics Simulation authors and contributors
    
      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at
    
          http://www.apache.org/licenses/LICENSE-2.0
    
      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
    -->
    
    <div style="float: right; padding-bottom: 1em;">
      <div class="dropup">
        <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">
          <span id="language">Linguagem: Português (Brasil)</span>
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
          <li><a href="../../modules/tutorial">English<span style="color:gray"></span></a></li>
          <li><a href="../../pl/modules/tutorial">polski<span style="color:gray"></span></a></li>
          <li><a href="../../pt-BR/modules/tutorial">Português (Brasil)<span style="color:gray"></span></a></li>
          <li><a href="../../cn/modules/tutorial">简体中文<span style="color:gray"></span></a></li>
          <li><a href="../../tw/modules/tutorial">正體中文<span style="color:gray"></span></a></li>
        </ul>
      </div>
    </div>  </div>

  <script id="MathJax-script" async src="../../thirdparty/mathjax/tex-mml-chtml.js"></script>
</body>

</html>